---
layout: post
title: "Minecraft 礦物掉落"
image: 
---

Minecraft 中礦物掉落的公式大多使用 `minecraft:ore_drop` 公式，數學式為：

$$
count * (max(0, random(level + 2) - 1) + 1)
$$

其中 count 為 1 的礦物以下稱為**單一掉落型**礦物，如煤炭、鑽石， count 不為 1 的礦物稱為**多重掉落型**礦物，如銅、青金石。

## 單一掉落

從運算結果來看，可以理解為：掉落一個的權重為 2 ，每有一等幸運，就會多一點權重再**額外掉落**一個，用表格說明：

| drop | 1 | 2 | 3 | 4 |
| --- | --- | --- | --- | --- |
| level=0 | 2 |  |  |  |
| level=1 | 2 | 1 |  |  |
| level=2 | 2 | 1 | 1 |  |
| level=3 | 2 | 1 | 1 | 1 |

機率的話則如下表：

| drop | 1 | 2 | 3 | 4 |
| --- | --- | --- | --- | --- |
| level=0 | 1.00 |  |  |  |
| level=1 | 0.66 | 0.33 |  |  |
| level=2 | 0.50 | 0.25 | 0.25 |  |
| level=3 | 0.40 | 0.20 | 0.20 | 0.20 |

## 多重掉落

| 礦物 | count |
| --- | --- |
| 銅礦 | 2~6 |
| 青金石礦 | 4~9 |
| 地獄金礦 | 2~6 |

這三種礦物的 `count` 機率為**平均分佈**，總掉落計算方法為先算出 `count` ，再乘上 `(max(0, random(level + 2) - 1) + 1)`。

## 關於紅石

紅石所使用的公式並不是 `minecraft:ore_drop` ，而是使用 `minecraft:uniform_bonus_count` ，紅石的 count 為 4~5 ，機率各半。

掉落 `count` 的權重為 1 ，每有一等幸運，就會多一點權重再額外掉落一個，以 `count=4` 為例用表格說明：

| drop | 4 | 5 | 6 | 7 |
| --- | --- | --- | --- | --- |
| level=0 | 1 |  |  |  |
| level=1 | 1 | 1 |  |  |
| level=2 | 1 | 1 | 1 |  |
| level=3 | 1 | 1 | 1 | 1 |

## 期望值

對於單一掉落型礦物：

| 幸運 | 期望值 |
| --- | --- |
| level=0 | 1.00 |
| level=1 | 1.33 |
| level=2 | 1.75 |
| level=3 | 2.20 |

對於多重掉落型礦物，只要將**單一掉落期望值**乘上 **count 期望值**即可：

| 幸運 | 銅礦 | 地獄金礦 | 青金石礦 |
| --- | --- | --- | --- |
| level=0 | 4.00 | 4.00 | 6.50 |
| level=1 | 5.33 | 5.33 | 8.66 |
| level=2 | 7.00 | 7.00 | 11.375 |
| level=3 | 8.80 | 8.80 | 14.30 |

對於紅石礦：

| 幸運 | 紅石礦 |
| --- | --- |
| level=0 | 4.5 |
| level=1 | 5.0 |
| level=2 | 5.5 |
| level=3 | 6.0 |